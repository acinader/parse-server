{"version":3,"sources":["../../src/LiveQuery/ParsePubSub.js"],"names":["ParsePubSub","useRedis","config","redisURL","createPublisher","RedisPubSub","adapter","pubSubAdapter","EventEmitterPubSub","createSubscriber"],"mappings":";;;;;;;AAAA;;AACA;;AAIA;;AAIA,MAAMA,cAAc,EAApB;;AAEA,SAASC,QAAT,CAAkBC,MAAlB,EAAwC;AACtC,QAAMC,WAAWD,OAAOC,QAAxB;AACA,SAAO,OAAOA,QAAP,KAAoB,WAApB,IAAmCA,aAAa,EAAvD;AACD;;AAEDH,YAAYI,eAAZ,GAA8B,UAASF,MAAT,EAA2B;AACvD,MAAID,SAASC,MAAT,CAAJ,EAAsB;AACpB,WAAOG,yBAAYD,eAAZ,CAA4BF,MAA5B,CAAP;AACD,GAFD,MAEO;AACL,UAAMI,UAAU,gCAAYJ,OAAOK,aAAnB,EAAkCC,sCAAlC,EAAsDN,MAAtD,CAAhB;AACA,QAAI,OAAOI,QAAQF,eAAf,KAAmC,UAAvC,EAAmD;AACjD,YAAM,6CAAN;AACD;AACD,WAAOE,QAAQF,eAAR,CAAwBF,MAAxB,CAAP;AACD;AACF,CAVD;;AAYAF,YAAYS,gBAAZ,GAA+B,UAASP,MAAT,EAA4B;AACzD,MAAID,SAASC,MAAT,CAAJ,EAAsB;AACpB,WAAOG,yBAAYI,gBAAZ,CAA6BP,MAA7B,CAAP;AACD,GAFD,MAEO;AACL,UAAMI,UAAU,gCAAYJ,OAAOK,aAAnB,EAAkCC,sCAAlC,EAAsDN,MAAtD,CAAhB;AACA,QAAI,OAAOI,QAAQG,gBAAf,KAAoC,UAAxC,EAAoD;AAClD,YAAM,8CAAN;AACD;AACD,WAAOH,QAAQG,gBAAR,CAAyBP,MAAzB,CAAP;AACD;AACF,CAVD;;QAaEF,W,GAAAA,W","file":"ParsePubSub.js","sourcesContent":["import { loadAdapter } from '../Adapters/AdapterLoader';\nimport {\n  EventEmitterPubSub\n} from '../Adapters/PubSub/EventEmitterPubSub';\n\nimport {\n  RedisPubSub\n} from '../Adapters/PubSub/RedisPubSub';\n\nconst ParsePubSub = {};\n\nfunction useRedis(config: any): boolean {\n  const redisURL = config.redisURL;\n  return typeof redisURL !== 'undefined' && redisURL !== '';\n}\n\nParsePubSub.createPublisher = function(config: any): any {\n  if (useRedis(config)) {\n    return RedisPubSub.createPublisher(config);\n  } else {\n    const adapter = loadAdapter(config.pubSubAdapter, EventEmitterPubSub, config)\n    if (typeof adapter.createPublisher !== 'function') {\n      throw 'pubSubAdapter should have createPublisher()';\n    }\n    return adapter.createPublisher(config);\n  }\n}\n\nParsePubSub.createSubscriber = function(config: any): void {\n  if (useRedis(config)) {\n    return RedisPubSub.createSubscriber(config);\n  } else {\n    const adapter = loadAdapter(config.pubSubAdapter, EventEmitterPubSub, config)\n    if (typeof adapter.createSubscriber !== 'function') {\n      throw 'pubSubAdapter should have createSubscriber()';\n    }\n    return adapter.createSubscriber(config);\n  }\n}\n\nexport {\n  ParsePubSub\n}\n"]}