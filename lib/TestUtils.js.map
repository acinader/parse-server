{"version":3,"sources":["../src/TestUtils.js"],"names":["destroyAllDataPermanently","process","env","TESTING","Promise","all","Object","keys","AppCache","cache","map","appId","app","get","databaseController","deleteEverything","resolve"],"mappings":";;;;;QAGgBA,yB,GAAAA,yB;;AAHhB;;;;;;AAEA;AACO,SAASA,yBAAT,GAAqC;AAC1C,MAAI,CAACC,QAAQC,GAAR,CAAYC,OAAjB,EAA0B;AACxB,UAAM,oCAAN;AACD;AACD,SAAOC,QAAQC,GAAR,CAAYC,OAAOC,IAAP,CAAYC,gBAASC,KAArB,EAA4BC,GAA5B,CAAgCC,SAAS;AAC1D,UAAMC,MAAMJ,gBAASK,GAAT,CAAaF,KAAb,CAAZ;AACA,QAAIC,IAAIE,kBAAR,EAA4B;AAC1B,aAAOF,IAAIE,kBAAJ,CAAuBC,gBAAvB,EAAP;AACD,KAFD,MAEO;AACL,aAAOX,QAAQY,OAAR,EAAP;AACD;AACF,GAPkB,CAAZ,CAAP;AAQD","file":"TestUtils.js","sourcesContent":["import AppCache from './cache';\n\n//Used by tests\nexport function destroyAllDataPermanently() {\n  if (!process.env.TESTING) {\n    throw 'Only supported in test environment';\n  }\n  return Promise.all(Object.keys(AppCache.cache).map(appId => {\n    const app = AppCache.get(appId);\n    if (app.databaseController) {\n      return app.databaseController.deleteEverything();\n    } else {\n      return Promise.resolve();\n    }\n  }));\n}\n"]}