{"version":3,"sources":["../src/ClientSDK.js"],"names":["semver","require","compatible","compatibleSDK","clientSDK","fromString","clientVersion","version","compatiblityVersion","sdk","satisfies","supportsForwardDelete","js","versionRE","match","toLowerCase","length","undefined","module","exports"],"mappings":";;AAAA,IAAIA,SAASC,QAAQ,QAAR,CAAb;;AAEA,SAASC,UAAT,CAAoBC,aAApB,EAAmC;AACjC,SAAO,UAASC,SAAT,EAAoB;AACzB,QAAI,OAAOA,SAAP,KAAqB,QAAzB,EAAmC;AACjCA,kBAAYC,WAAWD,SAAX,CAAZ;AACD;AACD;AACA,QAAI,CAACA,SAAL,EAAgB;AACd,aAAO,IAAP;AACD;AACD,UAAME,gBAAgBF,UAAUG,OAAhC;AACA,UAAMC,sBAAsBL,cAAcC,UAAUK,GAAxB,CAA5B;AACA,WAAOT,OAAOU,SAAP,CAAiBJ,aAAjB,EAAgCE,mBAAhC,CAAP;AACD,GAXD;AAYD;;AAED,SAASG,qBAAT,CAA+BP,SAA/B,EAA0C;AACxC,SAAOF,WAAW;AAChBU,QAAI;AADY,GAAX,EAEJR,SAFI,CAAP;AAGD;;AAED,SAASC,UAAT,CAAoBE,OAApB,EAA6B;AAC3B,QAAMM,YAAY,wBAAlB;AACA,QAAMC,QAAQP,QAAQQ,WAAR,GAAsBD,KAAtB,CAA4BD,SAA5B,CAAd;AACA,MAAIC,SAASA,MAAME,MAAN,KAAiB,CAA9B,EAAiC;AAC/B,WAAO;AACLP,WAAKK,MAAM,CAAN,CADA;AAELP,eAASO,MAAM,CAAN;AAFJ,KAAP;AAID;AACD,SAAOG,SAAP;AACD;;AAEDC,OAAOC,OAAP,GAAiB;AACfjB,YADe;AAEfS,uBAFe;AAGfN;AAHe,CAAjB","file":"ClientSDK.js","sourcesContent":["var semver = require('semver');\n\nfunction compatible(compatibleSDK) {\n  return function(clientSDK) {\n    if (typeof clientSDK === 'string') {\n      clientSDK = fromString(clientSDK);\n    }\n    // REST API, or custom SDK\n    if (!clientSDK) {\n      return true;\n    }\n    const clientVersion = clientSDK.version;\n    const compatiblityVersion = compatibleSDK[clientSDK.sdk];\n    return semver.satisfies(clientVersion, compatiblityVersion);\n  }\n}\n\nfunction supportsForwardDelete(clientSDK) {\n  return compatible({\n    js: '>=1.9.0'\n  })(clientSDK);\n}\n\nfunction fromString(version) {\n  const versionRE = /([-a-zA-Z]+)([0-9\\.]+)/;\n  const match = version.toLowerCase().match(versionRE);\n  if (match && match.length === 3) {\n    return {\n      sdk: match[1],\n      version: match[2]\n    }\n  }\n  return undefined;\n}\n\nmodule.exports = {\n  compatible,\n  supportsForwardDelete,\n  fromString\n}\n"]}